<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login - The GIST</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600&display=swap">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="font-['Space_Grotesk'] text-white min-h-screen relative overflow-hidden">

  <!-- Sky Background -->
  <div class="absolute inset-0 z-0" style="background-image: url('Images/sky3.png'); background-size: cover; background-position: center;"></div>
  <div class="absolute inset-0">
    <div class="absolute top-20 left-10 w-96 h-96 bg-indigo-900/20 rounded-full blur-3xl"></div>
    <div class="absolute bottom-10 right-10 w-80 h-80 bg-purple-900/20 rounded-full blur-3xl"></div>
    <div class="absolute top-40 right-20 w-64 h-64 bg-cyan-900/20 rounded-full blur-3xl"></div>
  </div>

  <!-- Main Container -->
  <div class="relative z-10 w-full max-w-4xl mx-auto px-6 py-16">
    <h1 class="text-4xl md:text-5xl font-bold text-center mb-10 bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent">
      Welcome - Select Your Role
    </h1>

    <!-- Role Selection -->
    <div id="role-selection" class="grid md:grid-cols-3 gap-6">
      <!-- Course -->
      <div class="role-card bg-gray-900/70 border border-gray-700 rounded-2xl p-6 cursor-pointer hover:border-cyan-400 transition" data-role="course">
        <img src="https://img.icons8.com/color/96/000000/open-book.png" alt="Course" class="mx-auto mb-4">
        <h2 class="text-2xl font-semibold text-center">Course</h2>
        <p class="text-gray-400 text-center mt-2">Login with course code and password.</p>
      </div>
      <!-- Lecturer -->
      <div class="role-card bg-gray-900/70 border border-gray-700 rounded-2xl p-6 cursor-pointer hover:border-cyan-400 transition" data-role="lecturer">
        <img src="https://img.icons8.com/color/96/000000/teacher.png" alt="Lecturer" class="mx-auto mb-4">
        <h2 class="text-2xl font-semibold text-center">Lecturer</h2>
        <p class="text-gray-400 text-center mt-2">Manage modules, quizzes, and maps.</p>
      </div>
      <!-- Admin -->
      <div class="role-card bg-gray-900/70 border border-gray-700 rounded-2xl p-6 cursor-pointer hover:border-cyan-400 transition" data-role="admin">
        <img src="https://img.icons8.com/color/96/000000/admin-settings-male.png" alt="Admin" class="mx-auto mb-4">
        <h2 class="text-2xl font-semibold text-center">Admin</h2>
        <p class="text-gray-400 text-center mt-2">System configuration & access control.</p>
      </div>
    </div>

    <!-- Login Form -->
    <div id="login-form" class="hidden mt-12 max-w-md mx-auto bg-gray-900/80 border border-gray-700 rounded-xl p-8 shadow-xl">
      <h2 id="form-role" class="text-2xl font-semibold mb-6 text-center">Login</h2>

      <!-- Error Message -->
      <% if (typeof error !== "undefined" && error) { %>
        <div class="mb-4 p-3 rounded-lg bg-red-500/20 border border-red-400 text-red-300 text-center">
          <%= error %>
        </div>
      <% } %>

      <form action="/login" method="POST" class="space-y-5">
        <input type="hidden" id="role-input" name="role">
        <!-- Dynamic Inputs -->
        <div id="dynamic-inputs"></div>
        <button type="submit" 
                class="w-full py-3 bg-gradient-to-r from-cyan-500 to-purple-500 rounded-lg font-semibold hover:from-cyan-400 hover:to-purple-400 transition">
          Sign In
        </button>
      </form>
    </div>
  </div>

  <!-- Script -->
  <script>
    const roleCards = document.querySelectorAll('.role-card');
    const loginForm = document.getElementById('login-form');
    const formRole = document.getElementById('form-role');
    const roleInput = document.getElementById('role-input');
    const dynamicInputs = document.getElementById('dynamic-inputs');

    roleCards.forEach(card => {
      card.addEventListener('click', () => {
        roleCards.forEach(c => c.classList.remove('ring-2','ring-cyan-400'));
        card.classList.add('ring-2','ring-cyan-400');
        loginForm.classList.remove('hidden');
        const role = card.getAttribute('data-role');
        formRole.textContent = `Login as ${role.charAt(0).toUpperCase() + role.slice(1)}`;
        roleInput.value = role;

        // Switch form fields based on role
        if (role === "course") {
          dynamicInputs.innerHTML = `
            <input type="text" name="course_code" placeholder="Course Code" required
                   class="w-full p-3 rounded-lg bg-gray-900/50 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-cyan-400">
            <input type="password" name="password" placeholder="Password" required
                   class="w-full p-3 rounded-lg bg-gray-900/50 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-cyan-400">
          `;
        } else {
          dynamicInputs.innerHTML = `
            <input type="text" name="username" placeholder="Username" required
                   class="w-full p-3 rounded-lg bg-gray-900/50 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-cyan-400">
            <input type="password" name="password" placeholder="Password" required
                   class="w-full p-3 rounded-lg bg-gray-900/50 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-cyan-400">
          `;
        }
        loginForm.scrollIntoView({ behavior: 'smooth' });
      });
    });
  </script>
</body>
</html>
